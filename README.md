# 5g_robot_race

5G Robot Race: an immersive race between two mobile robots remotely driven through a private 5G network. 

![image](https://github.com/xriteamupv/5g_robot_race/assets/152612523/db7ff49d-a616-4233-90cf-bf38e1116e4e)

The proposed high-level architecture can be seen in Figure 1. On the one hand, two mobile robots will be deployed in the UPV’s velodrome. The Robotnik SUMMIT-XL is a mobile robot designed for mapping, surveillance, or research purposes. The robot has a size of 720x614x416 mm and a weight of 65 kg, and it can move at a speed of up to 2.5 m/s. It is powered by the Robot Operating System (ROS), which is a framework for developing and controlling robot software that runs on Linux. It is attached with several sensors, including several cameras (conventional and 360º), a Global Navigation Satellite System (GNSS) sensor, and a 3D 360º LiDAR. Furthermore, the robot is equipped with a 5G modem that can connect to the 5G private network and transmit real-time data. 

The 5G private network is located inside and fully controlled by the iTEAM-UPV. As it can be appreciated in Figure 1, the antennas have line of sight to the Velodrome, creating ideal experimental conditions. The network offers outdoor connectivity through both 5G SA (standalone) and 5G mmW NSA (non-standalone) modes, using the n40 band (2370-2390 MHz) and the n258 band (25700-26700 MHz), respectively. Regular data will be communicated in real-time using the sub-6 GHz band since it has a better coverage, whereas heavy data will only be communicated using the mmW band when its connectivity is eventually available. In addition, the network supports slicing that will be used to prioritize the traffic generated by the robots and cockpits over any other type of traffic flows. 

On the other hand, two immersive cockpits will be located indoors for remotely controlling the robots, specifically in the iTEAM-UPV laboratories. Each immersive cockpit is the result of merging a racing seat, a wheel and pedals, a triple screen setup, and a Virtual Reality (VR) headset. It can offer either classical or VR visualization of the robot’s point of view as if the user were inside the robot, via a real-time video streaming. The users are also offered information about the status of their robots, the network and the rest of the fleet through a digital twin of the environment updated in real-time. The digital twin consists of a virtual model of the velodrome and the robots together with a Cloud Robotics application that stores and analyzes information captured by the sensors of the robot. Both elements of the digital twin are represented as an immersive user interface that can display data such as speed, lap time, and position of the robots (displayed in a minimap). In order to guarantee that the data of the robots is communicated to the cockpits with minimum latency, the cockpits are directly connected to the 5G Core. 

# 5G Robot Race Setup Guide

## Powering On

1. **Power on robot (Green key)**
   - Turns on modem

2. **Power on robot PC (Green button)**
   - Launches ROS and allows control from PS4 controller

3. **Power on cockpit PC**
   - Password: `MCGiteam2021`
   - Configure static IP to access the MEC

4. **Power on camera**
   - Hold down the home button

## Checking Connections

1. **Check 5G connection on the modem**
   - WiFi: `shl00-211222aa_5G`
   - Password: `R0b0tn1K`
   - Access: `192.168.0.1`
     - Username: `admin`
     - Password: `R0b0tn1K`
   - Check port forwarding to the camera and the robot PC

2. **Check access to the robot**
   - `ssh robot@(robot_IP)`
   - Password: `R0b0tn1K`
   - Note: `robot_IP` is `192.168.0.200` locally or `modem_IP` via port forwarding

3. **Check connection of the 360 camera**
   - For local tests, use WiFi
   - For remote tests, check Ethernet connection
     - Reconnect USB-C cable if it shows as unconnected

## Launching the System

1. **Launch RTSP Stream**
   - Use the Live App on the 360 camera

2. **Open the Unity project folder on the cockpit PC**
   - `C:\Users\XR\Unity\5g_robot_race_newvel\5g_robot_race_newvel`
  
3. **Build the project (or use an existent build)**
   - Open the project from Unity Hub usign version 2022.3
   - Click file -> Build Settings -> Save into `C:\Users\XR\Unity\5g_robot_race_newvel\5g_robot_race_newvel\Builds`

3. **Modify configuration files**
   - `Unity\UnityTests\Assets\ips.txt` with `camera_IP`
   - `proxy\unity2_robot.py` with `robot_IP`
     - Note: There are two entries, one for each summit, but you can use just one

4. **Run the proxy**
   - `python proxy\unity2_robot.py`

5. **Run Unity**
   - `Builds\UnityTests.exe`
